<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Centrum nieruchomości - Zacharska Klaudia</title>

  <meta name="description" content="Centrum nieruchomości – oferty dla każdego, profesjonalne doradztwo i obsługa. Zacharska Klaudia." />
  <link rel="canonical" href="https://twojadomena.pl/" />
  <meta property="og:title" content="Centrum nieruchomości - Zacharska Klaudia" />
  <meta property="og:description" content="Oferty dla każdego i profesjonalne doradztwo." />
  <meta property="og:type" content="website" />
  <link rel="icon" type="image" href="/favicon.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', sans-serif; overflow-x: hidden; }
    .scrollbar-none::-webkit-scrollbar { display: none; }
    .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }

    :root{
      --ring: 59 130 246; /* blue-500 */
      --shadow-soft: 0 24px 80px -40px rgba(2,6,23,.35);
      --shadow-card: 0 18px 60px -40px rgba(2,6,23,.30);
    }

    .line-button {
      align-items: center; background-color: #2563eb; color: #fff; cursor: pointer; display: inline-flex;
      font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      font-size: 1rem; font-weight: 700; line-height: 1.5; text-decoration: none; text-transform: uppercase;
      letter-spacing: .06em; outline: 0; border: 0; padding: 1rem 2rem; border-radius: 9999px;
      transition: background-color .25s ease-in-out, transform .25s ease-in-out, box-shadow .25s ease-in-out, filter .25s ease-in-out;
      box-shadow: 0 18px 55px -40px rgba(2,6,23,.60);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .line-button:before {
      background-color: #fff; content: ""; display: inline-block; height: 2px; margin-right: 12px;
      transition: all .42s cubic-bezier(.25,.8,.25,1); width: 0;
    }
    .line-button:hover { background-color: #1d4ed8; transform: translateY(-1px); filter: saturate(1.05); }
    .line-button:hover:before { background-color: #fff; width: 2.5rem; }
    .line-button:active { transform: translateY(0); }

    @keyframes fadeUp { from{opacity:0; transform:translateY(12px)} to{opacity:1; transform:translateY(0)} }
    @keyframes floaty { 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
    @keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }

    .animate-fade-up { animation: fadeUp .7s cubic-bezier(.2,.8,.2,1) both; }
    .hover-lift { transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s cubic-bezier(.2,.8,.2,1), filter .35s cubic-bezier(.2,.8,.2,1); }
    .hover-lift:hover { transform: translateY(-4px); box-shadow: var(--shadow-card); filter: saturate(1.03); }

    .glass {
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(226,232,240,.75);
      backdrop-filter: blur(16px);
    }

    .soft-gradient {
      background:
        radial-gradient(1100px 600px at 20% 10%, rgba(59,130,246,.20), transparent 60%),
        radial-gradient(900px 520px at 85% 0%, rgba(37,99,235,.16), transparent 55%),
        radial-gradient(900px 520px at 50% 100%, rgba(99,102,241,.10), transparent 55%),
        linear-gradient(to bottom, rgba(239,246,255,.92), rgba(255,255,255,1), rgba(239,246,255,.92));
    }

    .focus-ring:focus-visible {
      outline: none;
      box-shadow: 0 0 0 4px rgba(var(--ring), .22);
      border-color: rgba(var(--ring), .6);
    }

    .nav-pill {
      border-radius: 14px;
      padding: .5rem .75rem;
      transition: background-color .2s ease, color .2s ease, transform .2s ease;
    }
    .nav-pill:hover {
      background: rgba(255,255,255,.65);
      transform: translateY(-1px);
    }

    .hero-title { line-height: 1.05; letter-spacing: -0.02em; }
    .section { scroll-margin-top: 96px; }

    .skeleton {
      background: linear-gradient(90deg, rgba(226,232,240,.55), rgba(226,232,240,.95), rgba(226,232,240,.55));
      background-size: 200% 100%;
      animation: shimmer 1.2s ease-in-out infinite;
    }

    img, iframe { max-width: 100%; }
    .safe-container { width: 100%; overflow-x: clip; }

    /* ✅ lepsze kadrowanie portretów (często twarz jest wyżej) */
    .portrait-img { object-position: 50% 18%; }

    @media (max-width: 640px) {
      .line-button { padding: .95rem 1.4rem; font-size: .95rem; }
      .section { scroll-margin-top: 86px; }
    }

    @media (prefers-reduced-motion: reduce) {
      .animate-fade-up, .hover-lift, .line-button { animation: none !important; transition: none !important; }
      .skeleton { animation: none !important; }
    }
  </style>
</head>

<body id="top">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    const API_URL = "/api/listings";
    const FB_REVIEWS_URL = "https://www.facebook.com/profile.php?id=61554638487302&sk=reviews&locale=pl_PL";

    const SOCIALS = {
      facebook: "https://www.facebook.com/profile.php?id=61554638487302&locale=pl_PL",
      instagram: "https://www.instagram.com/centrumnieruchomoscizk/",
      tiktok: "https://www.tiktok.com/@centrum.nieruchom",
    };

    // ✅ nowe zdjęcia (imgur -> i.imgur.com)
    const TEAM_PHOTOS = {
      klaudia: "https://i.imgur.com/fBXGAkE.jpg",
      marcin: "https://i.imgur.com/Nk3Wjco.jpg",
      grazyna: "https://i.imgur.com/rJV3ztE.jpg",
    };

    const cn = (...classes) => classes.filter(Boolean).join(' ');
    const clamp = (n, min, max) => Math.max(min, Math.min(n, max));
    const currency = (n) => new Intl.NumberFormat("pl-PL", { style: "currency", currency: "PLN", maximumFractionDigits: 0 }).format(n);

    const useLocalStorage = (key, initial) => {
      const [state, setState] = useState(() => {
        try { const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : initial } catch { return initial }
      });
      useEffect(() => { try { localStorage.setItem(key, JSON.stringify(state)) } catch {} }, [key, state]);
      return [state, setState];
    };

    function useHashRoute() {
      const [hash, setHash] = useState(() => window.location.hash || "#/");
      useEffect(() => {
        const onHashChange = () => setHash(window.location.hash || "#/");
        window.addEventListener("hashchange", onHashChange);
        return () => window.removeEventListener("hashchange", onHashChange);
      }, []);
      return hash;
    }

    function useRevealOnScroll() {
      useEffect(() => {
        const els = Array.from(document.querySelectorAll("[data-reveal]"));
        const io = new IntersectionObserver((entries) => {
          entries.forEach((e) => { if (e.isIntersecting) e.target.classList.add("animate-fade-up"); });
        }, { threshold: 0.12 });
        els.forEach((el) => io.observe(el));
        return () => io.disconnect();
      }, []);
    }

    function useScrollTop() {
      const [show, setShow] = useState(false);
      useEffect(() => {
        const onScroll = () => setShow(window.scrollY > 600);
        onScroll();
        window.addEventListener("scroll", onScroll, { passive: true });
        return () => window.removeEventListener("scroll", onScroll);
      }, []);
      return show;
    }

    const Icon = ({ name, className }) => {
      const icons = {
        MapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></>,
        Phone: <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />,
        Mail: <><rect width="20" height="16" x="2" y="4" rx="2" /><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" /></>,
        Menu: <><line x1="4" x2="20" y1="12" y2="12" /><line x1="4" x2="20" y1="6" y2="6" /><line x1="4" x2="20" y1="18" y2="18" /></>,
        Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />,
        Heart: <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />,
        ChevronLeft: <path d="m15 18-6-6 6-6" />,
        ChevronRight: <path d="m9 18 6-6-6-6" />,
        Facebook: <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" />,
        Instagram: <><rect width="20" height="20" x="2" y="2" rx="5" ry="5" /><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" /><line x1="17.5" x2="17.51" y1="6.5" y2="6.5" /></>,
        TikTok: <>
          <path d="M14 3v10.5a3.5 3.5 0 1 1-3-3.46" />
          <path d="M14 3c1.3 2.9 3.2 4.7 6 5v3c-2.9-.2-5.1-1.4-6-3" />
        </>,
        Languages: <><path d="m5 8 6 6" /><path d="m4 14 6-6 2-3" /><path d="M2 5h12" /><path d="M7 2h1" /><path d="m22 22-5-10-5 10" /><path d="M14 18h6" /></>,
        LogIn: <><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" /><polyline points="10 17 15 12 10 7" /><line x1="15" x2="3" y1="12" y2="12" /></>,
        LogOut: <><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" /><polyline points="16 17 21 12 16 7" /><line x1="21" x2="9" y1="12" y2="12" /></>,
        UserPlus: <><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><line x1="19" x2="19" y1="8" y2="14" /><line x1="22" x2="16" y1="11" y2="11" /></>,
        Loader2: <path d="M21 12a9 9 0 1 1-6.219-8.56" />,
        X: <><path d="M18 6 6 18" /><path d="m6 6 12 12" /></>,
        ArrowUp: <><path d="m5 12 7-7 7 7" /><path d="M12 19V5" /></>,
      };
      return (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
          fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"
          className={cn("h-4 w-4", className)}>
          {icons[name]}
        </svg>
      );
    };

    const Button = ({ variant = 'default', size = 'default', className, children, ...props }) => {
      const variants = {
        default: "bg-blue-600 text-white hover:bg-blue-700 shadow-[0_18px_55px_-40px_rgba(2,6,23,.55)]",
        destructive: "bg-red-500 text-white hover:bg-red-600",
        outline: "border border-zinc-200 bg-white/40 hover:bg-white/70",
        secondary: "bg-blue-100 text-blue-900 hover:bg-blue-200",
        ghost: "hover:bg-white/60",
        link: "text-blue-600 underline-offset-4 hover:underline",
      };
      const sizes = { default: "h-10 px-4 py-2", sm: "h-9 rounded-md px-3", lg: "h-11 rounded-md px-8", icon: "h-10 w-10" };
      return (
        <button
          className={cn(
            "inline-flex items-center justify-center rounded-md text-sm font-semibold transition-[transform,box-shadow,background-color,border-color] duration-300 disabled:opacity-50 disabled:pointer-events-none focus-ring active:translate-y-[1px]",
            variants[variant],
            sizes[size],
            className
          )}
          {...props}
        >
          {children}
        </button>
      );
    };

    const Card = ({ className, children }) => <div className={cn("rounded-lg border bg-card text-card-foreground shadow-sm", className)}>{children}</div>;
    const CardHeader = ({ className, children }) => <div className={cn("flex flex-col space-y-1.5 p-6", className)}>{children}</div>;
    const CardTitle = ({ className, children }) => <h3 className={cn("text-2xl font-semibold leading-none tracking-tight", className)}>{children}</h3>;
    const CardContent = ({ className, children }) => <div className={cn("p-6 pt-0", className)}>{children}</div>;

    const Input = ({ className, ...props }) => (
      <input
        className={cn(
          "flex h-10 w-full rounded-xl border border-zinc-200 bg-white/70 px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-ring transition-shadow duration-300 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        {...props}
      />
    );

    const Textarea = ({ className, ...props }) => (
      <textarea
        className={cn(
          "flex min-h-[90px] w-full rounded-xl border border-zinc-200 bg-white/70 px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus-ring transition-shadow duration-300 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        {...props}
      />
    );

    const Switch = ({ checked, onChange }) => (
      <button
        type="button"
        role="switch"
        aria-checked={checked}
        onClick={() => onChange && onChange(!checked)}
        className={cn(
          "peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-ring disabled:cursor-not-allowed disabled:opacity-50",
          checked ? "bg-blue-600" : "bg-zinc-200"
        )}
      >
        <span className={cn(
          "pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform",
          checked ? "translate-x-5" : "translate-x-0"
        )} />
      </button>
    );

    const Badge = ({ variant = 'default', className, children }) => {
      const variants = { default: "border-transparent bg-blue-600 text-blue-50", secondary: "border-transparent bg-blue-100 text-blue-950" };
      return <div className={cn("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors", variants[variant], className)}>{children}</div>;
    };

    const Dialog = ({ open, onOpenChange, children }) => {
      if (!open) return null;
      return (
        <div className="fixed inset-0 z-50 bg-black/55 backdrop-blur-sm" onClick={() => onOpenChange(false)}>
          <div onClick={(e) => e.stopPropagation()}
            className="fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-white p-6 shadow-lg rounded-2xl">
            {children}
          </div>
        </div>
      );
    };

    const DialogContent = ({ children, className }) => <div className={className}>{children}</div>;
    const DialogHeader = ({ children }) => <div className="flex flex-col space-y-1.5 text-center sm:text-left">{children}</div>;
    const DialogTitle = ({ children }) => <h2 className="text-lg font-semibold">{children}</h2>;
    const DialogTrigger = ({ children }) => children;

    const Sheet = ({ open, onOpenChange, children }) => {
      if (!open) return null;
      return (
        <div className="fixed inset-0 z-50 bg-black/55 backdrop-blur-sm" onClick={() => onOpenChange(false)}>
          <div onClick={(e) => e.stopPropagation()} className="fixed inset-y-0 right-0 z-50 w-full max-w-sm border-l bg-white p-6 shadow-lg">
            {children}
          </div>
        </div>
      );
    };
    const SheetContent = ({ children }) => <div>{children}</div>;
    const SheetHeader = ({ children }) => <div className="flex flex-col space-y-2 text-center sm:text-left">{children}</div>;
    const SheetTitle = ({ children }) => <h2 className="text-lg font-semibold text-foreground">{children}</h2>;
    const SheetTrigger = ({ children }) => children;

    /* ✅ 5 miejsc na filmiki */
    const FACEBOOK_REELS = [
      { id: 1, src: "https://www.facebook.com/plugins/video.php?height=476&href=https%3A%2F%2Fwww.facebook.com%2Freel%2F1477845613236934%2F&show_text=false&width=267&t=0" },
      { id: 2, src: "https://www.facebook.com/plugins/video.php?height=476&href=https%3A%2F%2Fwww.facebook.com%2Freel%2F2264670390643136%2F&show_text=false&width=267&t=0" },
      { id: 3, src: "https://www.facebook.com/plugins/video.php?height=476&href=https%3A%2F%2Fwww.facebook.com%2Freel%2F1176788144348415%2F&show_text=false&width=267&t=0" },
      { id: 4, src: "https://www.facebook.com/plugins/video.php?height=476&href=https%3A%2F%2Fwww.facebook.com%2Freel%2F1124597172587459%2F&show_text=false&width=267&t=0" },
      { id: 5, src: "https://www.facebook.com/plugins/video.php?height=476&href=PASTE_REEL_URL_5&show_text=false&width=267&t=0" },
    ];

    const dict = {
      pl: {
        nav: ["Wideo", "O nas", "Opinie", "Kontakt"],
        cta: "Umów spotkanie",
        heroTitle: "Znajdź swoje wymarzone miejsce z nami",
        heroCTA: "Zobacz oferty",
        shorts: "Video | Reels",
        about: "O nas",
        // ✅ podmieniona historia (Twoja treść)
        story:
`Od dwóch lat jesteśmy częścią słupskiego rynku nieruchomości jako Centrum Nieruchomości, które stawia na autentyczność, relacje i realne wsparcie klientów. To był czas intensywnej pracy, wyzwań, wzruszeń i sukcesów — ale przede wszystkim czas spełniania marzeń, krok po kroku.

Od początku przyświecał nam jeden cel: robić to, co kochamy, i pozostać sobą każdego dnia. Wierzymy, że odwaga, konsekwencja i wiara w siebie potrafią zmienić więcej, niż się wydaje — i właśnie na tych wartościach budujemy naszą markę.

Dzięki zaufaniu klientów oraz współpracy z doświadczonymi doradcami kredytowymi i kancelarią notarialną tworzymy zgrany zespół, który działa sprawnie, profesjonalnie i z pełnym zaangażowaniem. Każda transakcja to dla nas coś więcej niż formalność — to odpowiedzialność za ważny etap w czyimś życiu.

Nie dążymy do perfekcji za wszelką cenę. Wierzymy, że prawdziwy sukces buduje serce, pasja i wiara, że wszystko jest możliwe.
Dlatego każdego dnia pracujemy z energią, uśmiechem i pełnym oddaniem — dla Was.`,
        values: ["Zaufanie", "Profesjonalizm", "Doświadczenie", "Innowacja"],
        testimonials: "Opinie klientów",
        contact: "Kontakt",
        allOffers: "Wszystkie Oferty",
        trust: ["Sprzedaż", "Zakup", "Pełna obsługa"], // ✅ bez “Wynajem”
        form: { name: "Imię i nazwisko", email: "Email", msg: "Wiadomość", send: "Wyślij", phone: "Numer telefonu", subject: "Temat wiadomości", consent: "Wyrażam zgodę na przetwarzanie moich danych osobowych." },
      },
      en: {
        nav: ["Video", "About", "Reviews", "Contact"],
        cta: "Book a meeting",
        heroTitle: "Find your dream place with us",
        heroCTA: "See listings",
        shorts: "Video | Reels",
        about: "About us",
        // ✅ szybkie tłumaczenie, żeby EN nie zostało puste
        story:
`For two years we’ve been part of the Słupsk real estate market as Centrum Nieruchomości — focused on authenticity, relationships and real support for our clients. It has been a time of hard work, challenges, emotions and successes — above all, a time of making dreams come true, step by step.

From the start, we had one goal: to do what we love and stay true to ourselves every day. We believe that courage, consistency and self-belief can change more than it seems — and these values are the foundation of our brand.

Thanks to our clients’ trust and cooperation with experienced mortgage advisors and a notary office, we form a strong team that works efficiently, professionally and with full commitment. Every transaction is more than paperwork — it’s responsibility for an important chapter in someone’s life.

We don’t chase perfection at all costs. We believe true success is built with heart, passion and faith that anything is possible.
That’s why every day we work with energy, a smile and full dedication — for you.`,
        values: ["Trust", "Professionalism", "Experience", "Innovation"],
        testimonials: "Client reviews",
        contact: "Contact",
        allOffers: "All Listings",
        trust: ["Sell", "Buy", "Full service"],
        form: { name: "Full name", email: "Email", msg: "Message", send: "Send", phone: "Phone number", subject: "Subject", consent: "I agree to the processing of my personal data." },
      }
    };

    const infoOr = (val) => {
      const v = (val ?? "").toString().trim();
      return v ? v : "Brak informacji";
    };

    const safeFloor = (val) => {
      if (val === null || val === undefined) return "Brak informacji";
      const v = String(val).trim();
      return v ? v : "Brak informacji";
    };

    function App() {
      useRevealOnScroll();

      const [lang, setLang] = useState("pl");
      const t = dict[lang];

      const [menuOpen, setMenuOpen] = useState(false);
      const [authed, setAuthed] = useLocalStorage("auth", { logged: false, name: "" });
      const [favs, setFavs] = useLocalStorage("favs", []);
      const [listings, setListings] = useState([]);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState("");
      const [selectedOffer, setSelectedOffer] = useState(null);

      const route = useHashRoute();
      const isHome = route === "#/" || route === "" || route === "#";
      const isOffers = route === "#/offers";

      const showTop = useScrollTop();

      useEffect(() => {
        let mounted = true;
        setLoading(true);
        fetch(API_URL)
          .then(r => { if (!r.ok) throw new Error("Błąd pobierania"); return r.json(); })
          .then(data => { if (mounted) { setListings(Array.isArray(data) ? data : []); setError(""); } })
          .catch(err => { if (mounted) setError("Nie udało się pobrać ogłoszeń."); console.error(err); })
          .finally(() => { if (mounted) setLoading(false); });
        return () => { mounted = false; };
      }, []);

      const toggleFav = (id) => setFavs((prev) => (prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]));

      return (
        <div className="min-h-screen soft-gradient text-zinc-900 selection:bg-blue-200 selection:text-blue-900 safe-container">
          <Header
            t={t} lang={lang} setLang={setLang}
            authed={authed} setAuthed={setAuthed}
            menuOpen={menuOpen} setMenuOpen={setMenuOpen}
            isHome={isHome}
          />

          <main>
            {isHome && (<>
              <Hero t={t} />
              <Shorts t={t} />
              <About t={t} />
              <ReviewsCTA t={t} />
              <Contact t={t} />
            </>)}

            {isOffers && (
              <AllOffersPage
                t={t}
                favs={favs}
                toggleFav={toggleFav}
                listings={listings}
                loading={loading}
                error={error}
                onSelect={setSelectedOffer}
              />
            )}
          </main>

          <Footer />

          {selectedOffer && <OfferDetailsModal offer={selectedOffer} onClose={() => setSelectedOffer(null)} />}
          {showTop && (
            <button
              aria-label="Wróć na górę"
              className="fixed bottom-6 right-6 z-40 rounded-2xl glass border shadow-[var(--shadow-soft)] p-3 hover-lift focus-ring"
              onClick={() => window.scrollTo({ top: 0, behavior: "smooth" })}
            >
              <Icon name="ArrowUp" className="h-5 w-5 text-blue-700" />
            </button>
          )}
        </div>
      );
    }

    function Header({ lang, setLang, t, authed, setAuthed, menuOpen, setMenuOpen, isHome }) {
      const scrollToSection = (id) => (e) => {
        e.preventDefault();
        const el = document.querySelector(id);
        if (el) el.scrollIntoView({ behavior: "smooth", block: "start" });
      };

      return (
        <header className="sticky top-0 z-50 glass border-b shadow-[0_18px_60px_-35px_rgba(2,6,23,.45)]">
          <div className="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between gap-3">
            <a href="#/" className="flex items-center gap-3 hover:opacity-95 transition-opacity min-w-0">
              <img src="https://i.imgur.com/UwnwhuV.png" alt="Centrum nieruchomości Logo" className="h-12 w-12 drop-shadow-sm shrink-0" />
              <div className="min-w-0">
                <div className="font-semibold tracking-tight truncate">Centrum nieruchomości</div>
                <div className="text-xs text-zinc-600 truncate">Zacharska Klaudia</div>
              </div>
            </a>

            <nav className="hidden md:flex items-center gap-2 text-sm">
              {isHome ? (<>
                <a href="#shorts" onClick={scrollToSection("#shorts")} className="nav-pill text-zinc-700 hover:text-zinc-900">{t.nav[0]}</a>
                <a href="#about" onClick={scrollToSection("#about")} className="nav-pill text-zinc-700 hover:text-zinc-900">{t.nav[1]}</a>
                <a href="#testimonials" onClick={scrollToSection("#testimonials")} className="nav-pill text-zinc-700 hover:text-zinc-900">{t.nav[2]}</a>
                <a href="#contact" onClick={scrollToSection("#contact")} className="nav-pill text-zinc-700 hover:text-zinc-900">{t.nav[3]}</a>
              </>) : (
                <a href="#/" className="nav-pill text-zinc-700 hover:text-zinc-900">Strona główna</a>
              )}

              <a href="#/offers" className="ml-2">
                <Button variant="secondary" className="rounded-2xl">{t.allOffers}</Button>
              </a>

              <div className="ml-1 flex items-center gap-2">
                <LangToggle lang={lang} setLang={setLang} />
                <AuthControls authed={authed} setAuthed={setAuthed} />
              </div>
            </nav>

            <div className="md:hidden flex items-center gap-2">
              <LangToggle lang={lang} setLang={setLang} />
              <Sheet open={menuOpen} onOpenChange={setMenuOpen}>
                <SheetTrigger>
                  <Button variant="outline" size="icon" className="rounded-2xl" onClick={() => setMenuOpen(true)} aria-label="Otwórz menu">
                    <Icon name="Menu" className="h-5 w-5" />
                  </Button>
                </SheetTrigger>
                <SheetContent>
                  <SheetHeader><SheetTitle>Menu</SheetTitle></SheetHeader>
                  <div className="mt-4 flex flex-col gap-2">
                    {isHome ? (<>
                      <a href="#shorts" onClick={(e) => { e.preventDefault(); document.querySelector("#shorts")?.scrollIntoView({behavior:"smooth"}); setMenuOpen(false); }} className="py-2 text-lg">{t.nav[0]}</a>
                      <a href="#about" onClick={(e) => { e.preventDefault(); document.querySelector("#about")?.scrollIntoView({behavior:"smooth"}); setMenuOpen(false); }} className="py-2 text-lg">{t.nav[1]}</a>
                      <a href="#testimonials" onClick={(e) => { e.preventDefault(); document.querySelector("#testimonials")?.scrollIntoView({behavior:"smooth"}); setMenuOpen(false); }} className="py-2 text-lg">{t.nav[2]}</a>
                      <a href="#contact" onClick={(e) => { e.preventDefault(); document.querySelector("#contact")?.scrollIntoView({behavior:"smooth"}); setMenuOpen(false); }} className="py-2 text-lg">{t.nav[3]}</a>
                    </>) : (
                      <a href="#/" onClick={() => setMenuOpen(false)} className="py-2 text-lg">Strona główna</a>
                    )}

                    <a href="#/offers" onClick={() => setMenuOpen(false)} className="w-full mt-2">
                      <Button className="w-full rounded-2xl">{t.allOffers}</Button>
                    </a>

                    <div className="mt-3">
                      <AuthControls authed={authed} setAuthed={setAuthed} mobile />
                    </div>
                  </div>
                </SheetContent>
              </Sheet>
            </div>
          </div>
        </header>
      );
    }

    function LangToggle({ lang, setLang }) {
      return (
        <Button variant="ghost" className="gap-2 rounded-2xl" onClick={() => setLang(lang === "pl" ? "en" : "pl")} aria-label="Zmień język">
          <Icon name="Languages" /> {lang.toUpperCase()}
        </Button>
      );
    }

    function AuthControls({ authed, setAuthed, mobile }) {
      const [open, setOpen] = useState(false);
      return (
        <Dialog open={open} onOpenChange={setOpen}>
          <DialogTrigger>
            <Button onClick={() => setOpen(true)} variant={mobile ? "secondary" : "outline"} className="gap-2 rounded-2xl">
              <Icon name={authed.logged ? "LogOut" : "LogIn"} /> {authed.logged ? "Wyloguj" : "Zaloguj"}
            </Button>
          </DialogTrigger>

          <DialogContent className="sm:max-w-md glass rounded-3xl shadow-[var(--shadow-soft)]">
            <DialogHeader>
              <DialogTitle>{authed.logged ? "Wylogowanie" : "Logowanie / Rejestracja"}</DialogTitle>
            </DialogHeader>

            {authed.logged ? (
              <Button onClick={() => setAuthed({ logged: false, name: "" })} className="w-full rounded-2xl">
                Potwierdź wylogowanie
              </Button>
            ) : (
              <AuthForm onSuccess={(name) => { setAuthed({ logged: true, name }); setOpen(false); }} />
            )}
          </DialogContent>
        </Dialog>
      );
    }

    function AuthForm({ onSuccess }) {
      const [loading, setLoading] = useState(false);
      const [remember, setRemember] = useState(true);

      const handle = (e) => {
        e.preventDefault();
        setLoading(true);
        setTimeout(() => { setLoading(false); onSuccess(e.target.name.value || "Użytkownik"); }, 800);
      };

      return (
        <form onSubmit={handle} className="space-y-3">
          <Input name="name" placeholder="Imię i nazwisko" required />
          <Input name="email" type="email" placeholder="Email" required />
          <Input name="pass" type="password" placeholder="Hasło" required />
          <div className="flex items-center justify-between text-xs text-zinc-500">
            <label className="flex items-center gap-2 select-none">
              <Switch checked={remember} onChange={setRemember} /> Zapamiętaj mnie
            </label>
            <a href="#" className="underline hover:text-zinc-700">Przypomnij hasło</a>
          </div>
          <Button type="submit" className="w-full rounded-2xl" disabled={loading}>
            {loading ? <Icon name="Loader2" className="animate-spin" /> : <><Icon name="UserPlus" className="mr-2" /> Zaloguj / Zarejestruj</>}
          </Button>
        </form>
      );
    }

    function Hero({ t }) {
      return (
        <section className="w-full section" id="hero" data-reveal>
          <div className="mx-auto max-w-7xl px-4 py-16 sm:py-20 lg:py-24 grid lg:grid-cols-2 gap-10 lg:gap-12 items-center">
            <div className="text-center lg:text-left">
              <h1 className="text-zinc-900 text-4xl sm:text-5xl md:text-6xl font-semibold hero-title">
                Znajdź swoje <span className="text-blue-600">wymarzone miejsce</span> z nami
              </h1>

              <p className="mt-4 text-base sm:text-lg text-zinc-600 leading-relaxed">
                Pomagamy w sprzedaży, zakupie i wynajmie nieruchomości — jasno, sprawnie i po ludzku.
              </p>

              <div className="mt-6 flex flex-wrap gap-2 justify-center lg:justify-start">
                {t.trust.map((x) => <Badge key={x} variant="secondary">{x}</Badge>)}
              </div>

              <div className="mt-8 flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4">
                <a href="#/offers" className="line-button">{t.heroCTA}</a>
                <Button
                  variant="outline"
                  size="lg"
                  className="rounded-full px-8 py-6 text-base hover-lift w-full sm:w-auto"
                  onClick={() => document.querySelector("#contact")?.scrollIntoView({ behavior: "smooth" })}
                >
                  {t.cta}
                </Button>
              </div>

              <div className="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-3 text-sm text-zinc-600">
                <div className="rounded-2xl glass px-4 py-2 border shadow-sm">Szybka odpowiedź</div>
                <div className="rounded-2xl glass px-4 py-2 border shadow-sm">Transparentnie</div>
                <div className="rounded-2xl glass px-4 py-2 border shadow-sm">Lokalnie</div>
              </div>
            </div>

            <div className="flex items-center justify-center">
              <div className="relative w-full max-w-xl">
                <div className="absolute -inset-3 rounded-[2.5rem] blur-2xl opacity-60"
                  style={{
                    background:
                      "radial-gradient(600px 380px at 30% 20%, rgba(59,130,246,.35), transparent 60%), radial-gradient(600px 380px at 80% 0%, rgba(37,99,235,.28), transparent 55%)"
                  }}
                />
                <div className="relative rounded-3xl overflow-hidden shadow-[var(--shadow-soft)] border glass">
                  <img
                    src="https://i.imgur.com/CcxoJP0.png"
                    alt="Wnętrze"
                    className="w-full h-auto object-cover animate-[floaty_6s_ease-in-out_infinite]"
                    loading="eager"
                  />
                  <div className="absolute inset-x-0 bottom-0 p-5 bg-gradient-to-t from-black/35 to-transparent">
                    <div className="text-white/95 font-semibold text-lg">Inspiracje i nieruchomości</div>
                    <div className="text-white/80 text-sm">Nowoczesna prezentacja • świetna obsługa</div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>
      );
    }

    /* ✅ REELS: bez telefonu, 5 miejsc, poziomo */
    function Shorts({ t }) {
      const reels = useMemo(() => {
        const base = Array.isArray(FACEBOOK_REELS) ? FACEBOOK_REELS : [];
        const out = [...base].slice(0, 5);
        while (out.length < 5) out.push({ id: "ph-" + out.length, src: "" });
        return out;
      }, []);

      return (
        <section id="shorts" className="w-full py-16 sm:py-24 section" aria-label={t.shorts} data-reveal>
          <div className="mx-auto max-w-7xl px-4">
            <h3 className="text-3xl md:text-4xl font-semibold tracking-tight text-center md:text-left">
              Video | Reels
            </h3>
            <p className="text-zinc-600 mt-2 leading-relaxed text-center md:text-left">
              Zobacz nasze realizacje i inspiracje prosto z Facebook Reels.
            </p>

            <div className="mt-8 rounded-[2rem] glass border shadow-[var(--shadow-soft)] p-3 sm:p-4">
              <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
                {reels.map((reel, i) => (
                  <div
                    key={reel.id ?? i}
                    className="rounded-[1.6rem] overflow-hidden border bg-white/60 hover-lift"
                    style={{ aspectRatio: "9 / 16" }}
                  >
                    {reel.src ? (
                      <iframe
                        title={"Reel " + (reel.id ?? i)}
                        src={reel.src}
                        className="w-full h-full"
                        style={{ border: "none", overflow: "hidden" }}
                        scrolling="no"
                        frameBorder="0"
                        allowFullScreen={true}
                        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"
                      />
                    ) : (
                      <div className="w-full h-full flex items-center justify-center text-sm text-zinc-500 bg-zinc-100">
                        Miejsce na filmik #{i + 1}
                      </div>
                    )}
                  </div>
                ))}
              </div>

              <div className="mt-6 flex flex-wrap gap-2 justify-center md:justify-start">
                <a href="#/offers">
                  <Button variant="secondary" className="rounded-2xl">Przeglądaj oferty</Button>
                </a>
                <a href="#contact" onClick={(e)=>{e.preventDefault(); document.querySelector("#contact")?.scrollIntoView({behavior:"smooth"});}}>
                  <Button variant="outline" className="rounded-2xl">Kontakt</Button>
                </a>
              </div>
            </div>
          </div>
        </section>
      );
    }

    // ✅ ULEPSZONA SEKCJA O NAS: karty zespołu bez przycinania imienia/stanowiska
    function About({ t }) {
      const paragraphs = (t.story || "").split("\n\n").filter(Boolean);

      const team = [
        { name: "Marcin Zacharski", role: "Agent Nieruchomości", src: TEAM_PHOTOS.marcin, accent: "from-blue-600/25 via-indigo-600/10 to-transparent" },
        { name: "Klaudia Zacharska", role: "Agentka Nieruchomości", src: TEAM_PHOTOS.klaudia, featured: true, accent: "from-blue-600/35 via-indigo-600/12 to-transparent" },
        { name: "Grażyna Głowacka", role: "Biuro Obsługi", src: TEAM_PHOTOS.grazyna, accent: "from-blue-600/25 via-indigo-600/10 to-transparent" },
      ];

      const PersonCard = ({ person }) => (
        <div
          className={cn(
            "relative rounded-[2rem] overflow-hidden border bg-white/60 shadow-[var(--shadow-soft)] hover-lift",
            person.featured ? "md:-translate-y-2" : ""
          )}
        >
          <div className={cn("absolute inset-0 bg-gradient-to-t", person.accent)} />

          <img
            src={person.src}
            alt={person.name}
            className={cn(
              "w-full aspect-[3/4] object-cover portrait-img",
              person.featured ? "scale-[1.02]" : ""
            )}
            loading="lazy"
          />

          {/* ✅ WIĘKSZY overlay + BRAK truncate + ZAWIJANIE */}
          <div className="absolute inset-x-0 bottom-0 p-5 sm:p-6 bg-gradient-to-t from-black/65 via-black/25 to-transparent">
            <div className="flex items-end justify-between gap-3">
              <div className="min-w-0">
                <div className="text-white font-semibold text-base sm:text-lg leading-snug whitespace-normal break-words">
                  {person.name}
                </div>
                <div className="mt-1 text-white/90 text-xs sm:text-sm leading-snug whitespace-normal break-words">
                  {person.role}
                </div>
              </div>
              {person.featured ? (
                <div className="shrink-0 rounded-full bg-white/15 border border-white/20 px-3 py-1 text-[11px] text-white/95 backdrop-blur whitespace-nowrap">
                  Zespół
                </div>
              ) : null}
            </div>
          </div>
        </div>
      );

      return (
        <section id="about" className="w-full py-16 sm:py-24 section" data-reveal>
          <div className="mx-auto max-w-7xl px-4">
            <div className="grid lg:grid-cols-2 gap-10 lg:gap-12 items-start">
              {/* Tekst */}
              <div className="flex flex-col items-center text-center lg:items-start lg:text-left">
                <h3 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.about}</h3>

                <div className="mt-5 w-full rounded-[2rem] glass border shadow-[var(--shadow-soft)] p-6 sm:p-7 text-left">
                  <div className="flex items-center gap-3">
                    <div className="h-11 w-11 rounded-2xl bg-blue-600/10 border border-blue-200/40 flex items-center justify-center">
                      <Icon name="Star" className="h-6 w-6 text-blue-600" />
                    </div>
                    <div>
                      <div className="font-semibold text-zinc-900">Nasza historia</div>
                      <div className="text-sm text-zinc-500">Poznaj nas bliżej</div>
                    </div>
                  </div>

                  <div className="mt-5 space-y-4 text-zinc-700 leading-relaxed">
                    {paragraphs.map((p, i) => (
                      <p key={i} className="text-sm sm:text-base whitespace-pre-line">{p}</p>
                    ))}
                  </div>

                  <div className="mt-6 flex flex-wrap gap-2">
                    {t.values.map((v) => (
                      <div key={v} className="rounded-full border bg-white/60 px-3 py-1 text-xs font-semibold text-zinc-700">
                        {v}
                      </div>
                    ))}
                  </div>
                </div>
              </div>

              {/* Zespół */}
              <div className="relative">
                <div
                  className="absolute -inset-4 rounded-[2.5rem] blur-2xl opacity-60"
                  style={{
                    background:
                      "radial-gradient(700px 420px at 20% 10%, rgba(59,130,246,.30), transparent 60%), radial-gradient(600px 380px at 85% 0%, rgba(37,99,235,.22), transparent 55%), radial-gradient(900px 520px at 50% 100%, rgba(99,102,241,.14), transparent 55%)"
                  }}
                />
                <div className="relative rounded-[2rem] glass border shadow-[var(--shadow-soft)] p-4 sm:p-5">
                  <div className="flex items-center justify-between gap-3 mb-4">
                    <div>
                      <div className="font-semibold text-zinc-900">Poznaj zespół</div>
                      <div className="text-sm text-zinc-500">Wspieramy Cię na każdym etapie</div>
                    </div>
                    <Badge variant="secondary" className="rounded-full">Centrum Nieruchomości</Badge>
                  </div>

                  <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    {team.map((person) => <PersonCard key={person.name} person={person} />)}
                  </div>

                  <div className="mt-5 rounded-2xl border bg-white/60 p-4 text-sm text-zinc-600">
                    Chcesz porozmawiać o sprzedaży lub zakupie? Napisz do nas — odpowiemy jeszcze dziś.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      );
    }

    function ReviewsCTA({ t }) {
      return (
        <section id="testimonials" className="w-full py-16 sm:py-24 section" data-reveal>
          <div className="mx-auto max-w-7xl px-4">
            <div className="rounded-[2rem] glass border shadow-[var(--shadow-soft)] overflow-hidden">
              <div className="p-8 md:p-12 grid md:grid-cols-2 gap-10 items-center">
                <div>
                  <h3 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.testimonials}</h3>
                  <p className="mt-3 text-zinc-600 leading-relaxed">
                    Opinie dostępne są bezpośrednio na Facebooku — kliknij i sprawdź recenzje klientów.
                  </p>

                  <div className="mt-7 flex flex-wrap gap-3">
                    <a href={FB_REVIEWS_URL} target="_blank" rel="noreferrer" className="line-button">
                      Zobacz nasze opinie
                    </a>

                    <Button
                      variant="outline"
                      size="lg"
                      className="rounded-full px-8 py-6 text-base hover-lift"
                      onClick={() => window.open(FB_REVIEWS_URL, "_blank", "noopener,noreferrer")}
                    >
                      Otwórz w nowej karcie
                    </Button>
                  </div>

                  <div className="mt-6 text-xs text-zinc-500">* Opinie otwierają się w serwisie Facebook.</div>
                </div>

                <div className="relative">
                  <div
                    className="absolute -inset-3 rounded-[2.5rem] blur-2xl opacity-60"
                    style={{
                      background:
                        "radial-gradient(600px 380px at 30% 20%, rgba(59,130,246,.28), transparent 60%), radial-gradient(600px 380px at 80% 0%, rgba(37,99,235,.22), transparent 55%)",
                    }}
                  />
                  <div className="relative rounded-[2rem] border glass p-6 md:p-8 shadow-[var(--shadow-soft)]">
                    <div className="flex items-center gap-3">
                      <div className="h-12 w-12 rounded-2xl bg-blue-600/10 flex items-center justify-center">
                        <Icon name="Star" className="h-6 w-6 text-blue-600" />
                      </div>
                      <div>
                        <div className="font-semibold">Opinie klientów</div>
                        <div className="text-sm text-zinc-500">Kliknij, aby zobaczyć recenzje na Facebooku</div>
                      </div>
                    </div>

                    <div className="mt-6 grid grid-cols-2 sm:grid-cols-3 gap-3">
                      {Array.from({ length: 6 }).map((_, i) => (
                        <div key={i} className="rounded-2xl border bg-white/60 p-4">
                          <div className="flex gap-1 text-blue-600">
                            {Array.from({ length: 5 }).map((__, s) => (<span key={s}>★</span>))}
                          </div>
                          <div className="mt-3 h-2 w-full rounded bg-zinc-200/70" />
                          <div className="mt-2 h-2 w-4/5 rounded bg-zinc-200/70" />
                        </div>
                      ))}
                    </div>

                    <div className="mt-6 rounded-2xl border bg-white/60 p-4 text-sm text-zinc-600">
                      Kliknij “Zobacz nasze opinie”, aby przejść do zakładki recenzji.
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </section>
      );
    }

    function Contact({ t }) {
      const [state, setState] = useState({ name: "", email: "", phone: "", subject: "", msg: "", consent: false });

      const allValid =
        state.name.length > 2 &&
        /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(state.email) &&
        state.msg.length > 5 &&
        state.consent;

      const mapSrc = "https://www.google.com/maps?q=" + encodeURIComponent("ul. Starzyńskiego 3, 76-200 Słupsk, Polska") + "&output=embed";

      return (
        <section id="contact" className="w-full py-16 sm:py-24 section" data-reveal>
          <div className="mx-auto max-w-7xl px-4 grid md:grid-cols-2 gap-10 items-start">
            <div className="flex flex-col items-center text-center md:items-start md:text-left">
              <h3 className="text-3xl md:text-4xl font-semibold tracking-tight">{t.contact}</h3>
              <p className="text-zinc-600 mt-2 leading-relaxed">Skontaktuj się z nami – odpowiemy jeszcze dziś.</p>

              <div className="mt-6 space-y-3">
                <div className="flex items-center gap-2 text-zinc-800">
                  <div className="h-9 w-9 rounded-2xl bg-white/60 border flex items-center justify-center"><Icon name="Phone"/></div>
                  <span className="font-medium">534 845 780</span>
                </div>
                <div className="flex items-center gap-2 text-zinc-800">
                  <div className="h-9 w-9 rounded-2xl bg-white/60 border flex items-center justify-center"><Icon name="Mail"/></div>
                  <span className="font-medium">centrumnieruchomoscikz@op.pl</span>
                </div>
                <div className="flex items-center gap-2 text-zinc-800">
                  <div className="h-9 w-9 rounded-2xl bg-white/60 border flex items-center justify-center"><Icon name="MapPin"/></div>
                  <span className="font-medium">ul. Starzyńskiego 3, Słupsk</span>
                </div>

                <div className="flex items-center justify-center md:justify-start gap-3 text-zinc-600 mt-5">
                  <a className="h-10 w-10 rounded-2xl border bg-white/60 flex items-center justify-center hover:bg-white/80 transition-colors"
                     href={SOCIALS.facebook} target="_blank" rel="noreferrer" aria-label="Facebook" title="Facebook">
                    <Icon name="Facebook"/>
                  </a>
                  <a className="h-10 w-10 rounded-2xl border bg-white/60 flex items-center justify-center hover:bg-white/80 transition-colors"
                     href={SOCIALS.instagram} target="_blank" rel="noreferrer" aria-label="Instagram" title="Instagram">
                    <Icon name="Instagram"/>
                  </a>
                  <a className="h-10 w-10 rounded-2xl border bg-white/60 flex items-center justify-center hover:bg-white/80 transition-colors"
                     href={SOCIALS.tiktok} target="_blank" rel="noreferrer" aria-label="TikTok" title="TikTok">
                    <Icon name="TikTok"/>
                  </a>
                </div>
              </div>

              <div className="mt-6 w-full rounded-3xl overflow-hidden shadow-[var(--shadow-soft)] glass hover-lift">
                <iframe
                  title="Mapa"
                  src={mapSrc}
                  width="100%"
                  height="280"
                  style={{ border: 0 }}
                  loading="lazy"
                  allowFullScreen=""
                  referrerPolicy="no-referrer-when-downgrade"
                />
              </div>
            </div>

            <Card className="rounded-[2rem] glass hover-lift shadow-[var(--shadow-soft)] border-zinc-200/70">
              <CardHeader><CardTitle>Formularz kontaktowy</CardTitle></CardHeader>
              <CardContent>
                <form
                  className="space-y-3"
                  action="https://formsubmit.co/centrumnieruchomoscikz@op.pl"
                  method="POST"
                >
                  <input type="hidden" name="_subject" value="Nowa wiadomość — Centrum nieruchomości" />
                  <input type="hidden" name="_template" value="table" />
                  <input type="hidden" name="_captcha" value="false" />
                  <input type="hidden" name="_next" value={window.location.origin + "/#/"} />

                  <Input
                    name="name"
                    placeholder={t.form.name}
                    value={state.name}
                    onChange={(e) => setState({ ...state, name: e.target.value })}
                    required
                  />
                  <Input
                    name="email"
                    placeholder={t.form.email}
                    type="email"
                    value={state.email}
                    onChange={(e) => setState({ ...state, email: e.target.value })}
                    required
                  />
                  <Input
                    name="phone"
                    placeholder={t.form.phone}
                    type="tel"
                    value={state.phone}
                    onChange={(e) => setState({ ...state, phone: e.target.value })}
                  />
                  <Input
                    name="subject"
                    placeholder={t.form.subject}
                    value={state.subject}
                    onChange={(e) => setState({ ...state, subject: e.target.value })}
                  />
                  <Textarea
                    name="message"
                    placeholder={t.form.msg}
                    value={state.msg}
                    onChange={(e) => setState({ ...state, msg: e.target.value })}
                    required
                  />
                  <div className="flex items-start gap-2 py-2">
                    <input
                      type="checkbox"
                      id="consent"
                      checked={state.consent}
                      onChange={(e) => setState({...state, consent: e.target.checked})}
                      className="mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                      required
                    />
                    <label htmlFor="consent" className="text-sm text-zinc-600 leading-relaxed">{t.form.consent}</label>
                  </div>

                  <Button type="submit" className="w-full rounded-2xl hover-lift" disabled={!allValid}>
                    {t.form.send}
                  </Button>

                  <div className="text-xs text-zinc-500 text-center">
                    Formularz wysyła wiadomość przez FormSubmit.
                  </div>
                </form>
              </CardContent>
            </Card>
          </div>
        </section>
      );
    }

    function Slider({ className, min = 0, max = 100, step = 1, defaultValue = [0, 100], onValueChange }) {
      const [values, setValues] = useState(defaultValue);
      const rangeRef = useRef(null);
      const activeThumb = useRef(null);

      useEffect(() => { setValues(defaultValue); }, [defaultValue]);

      const toValueFromClientX = (clientX) => {
        if (!rangeRef.current) return values[0];
        const rect = rangeRef.current.getBoundingClientRect();
        const percent = clamp((clientX - rect.left) / rect.width, 0, 1);
        return Math.round((min + percent * (max - min)) / step) * step;
      };

      const applyAt = (clientX, thumbIndex) => {
        const newValue = toValueFromClientX(clientX);
        setValues((prev) => {
          const next = [...prev];
          if (thumbIndex === 0) next[0] = Math.min(newValue, prev[1] - step);
          else next[1] = Math.max(newValue, prev[0] + step);
          onValueChange && onValueChange(next);
          return next;
        });
      };

      const startDrag = (thumbIndex) => (e) => {
        activeThumb.current = thumbIndex;
        const clientX = e.touches?.[0]?.clientX ?? e.clientX;
        if (clientX != null) applyAt(clientX, thumbIndex);
      };

      const onMove = (e) => {
        if (activeThumb.current == null) return;
        if (e.cancelable) e.preventDefault();
        const clientX = e.touches?.[0]?.clientX ?? e.clientX;
        if (clientX == null) return;
        applyAt(clientX, activeThumb.current);
      };

      const endDrag = () => { activeThumb.current = null; };

      const left = ((values[0] - min) / (max - min)) * 100;
      const right = ((values[1] - min) / (max - min)) * 100;

      const onTrackDown = (e) => {
        const clientX = e.touches?.[0]?.clientX ?? e.clientX;
        if (clientX == null) return;
        const val = toValueFromClientX(clientX);
        const distL = Math.abs(val - values[0]);
        const distR = Math.abs(val - values[1]);
        const thumb = distL <= distR ? 0 : 1;
        activeThumb.current = thumb;
        if (e.cancelable) e.preventDefault();
        applyAt(clientX, thumb);
      };

      return (
        <div
          ref={rangeRef}
          className={cn("relative flex items-center select-none w-full h-8", className)}
          style={{ touchAction: "none" }}
          onPointerMove={onMove}
          onPointerUp={endDrag}
          onPointerCancel={endDrag}
          onMouseMove={onMove}
          onMouseUp={endDrag}
          onTouchMove={onMove}
          onTouchEnd={endDrag}
          onTouchCancel={endDrag}
        >
          <div
            className="relative w-full h-2 bg-zinc-200 rounded-full cursor-pointer"
            onPointerDown={onTrackDown}
            onMouseDown={onTrackDown}
            onTouchStart={onTrackDown}
          >
            <div className="absolute h-full bg-blue-600 rounded-full" style={{ left: `${left}%`, right: `${100 - right}%` }} />

            <div
              role="slider"
              aria-label="Minimum"
              className="absolute w-7 h-7 bg-white border-2 border-blue-600 rounded-full -top-2.5 transform -translate-x-1/2 shadow cursor-grab active:cursor-grabbing"
              style={{ left: `${left}%` }}
              onPointerDown={startDrag(0)}
              onMouseDown={startDrag(0)}
              onTouchStart={startDrag(0)}
            />

            <div
              role="slider"
              aria-label="Maksimum"
              className="absolute w-7 h-7 bg-white border-2 border-blue-600 rounded-full -top-2.5 transform -translate-x-1/2 shadow cursor-grab active:cursor-grabbing"
              style={{ left: `${right}%` }}
              onPointerDown={startDrag(1)}
              onMouseDown={startDrag(1)}
              onTouchStart={startDrag(1)}
            />
          </div>
        </div>
      );
    }

    function AllOffersPage({ t, favs, toggleFav, listings, loading, error, onSelect }) {
      const [query, setQuery] = useState("");
      const [city, setCity] = useState("");
      const [type, setType] = useState("");
      const [rooms, setRooms] = useState(0);
      const [area, setArea] = useState([30, 160]);
      const [price, setPrice] = useState([300000, 1500000]);
      const [sort, setSort] = useState("newest");
      const [grid, setGrid] = useState(true);
      const [page, setPage] = useState(1);
      const pageSize = 9;

      const cities = useMemo(() => Array.from(new Set(listings.map(x => x.city))).filter(Boolean), [listings]);
      const types = useMemo(() => Array.from(new Set(listings.map(x => x.type))).filter(Boolean), [listings]);

      const filtered = useMemo(() => {
        let out = listings
          .filter((x) =>
            (x.title || "").toLowerCase().includes(query.toLowerCase()) &&
            (!city || x.city === city) &&
            (!type || x.type === type) &&
            (rooms ? Number(x.rooms) >= Number(rooms) : true) &&
            Number(x.area) >= area[0] && Number(x.area) <= area[1] &&
            Number(x.price) >= price[0] && Number(x.price) <= price[1]
          );

        if (sort === "cheapest") out.sort((a, b) => Number(a.price) - Number(b.price));
        else if (sort === "newest") out.sort((a, b) => (new Date(b.createdAt || 0)).getTime() - (new Date(a.createdAt || 0)).getTime());
        else if (sort === "featured") out.sort((a,b) => (b.featured ? 1:0) - (a.featured ? 1:0) || (new Date(b.createdAt || 0)).getTime() - (new Date(a.createdAt || 0)).getTime());
        return out;
      }, [listings, query, city, type, rooms, area, price, sort]);

      const visible = filtered.slice(0, page * pageSize);
      const canLoad = visible.length < filtered.length;

      useEffect(() => {
        const onScroll = () => {
          if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 240 && canLoad) setPage((p) => p + 1);
        };
        window.addEventListener("scroll", onScroll, { passive: true });
        return () => window.removeEventListener("scroll", onScroll);
      }, [canLoad, filtered]);

      const resetFilters = () => {
        setQuery(""); setCity(""); setType(""); setRooms(0); setArea([30,160]); setPrice([300000,1500000]); setSort("newest"); setPage(1);
      };

      const filtersClass = "mt-6 grid grid-cols-1 md:grid-cols-12 gap-3 p-4 rounded-[1.6rem] glass shadow-[var(--shadow-soft)]";

      return (
        <section className="w-full py-10 min-h-screen section" data-reveal>
          <div className="mx-auto max-w-7xl px-4">
            <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
              <div className="flex items-center gap-3">
                <a href="#/" className="rounded-xl">
                  <Button variant="outline" className="rounded-2xl hover-lift">
                    <Icon name="ChevronLeft" className="mr-2" />Wróć
                  </Button>
                </a>
                <div>
                  <h2 className="text-2xl md:text-3xl font-semibold tracking-tight">{t.allOffers}</h2>
                  <div className="text-sm text-zinc-500">Filtruj wygodnie i szybko</div>
                </div>
                <Badge variant="secondary" className="ml-2">{filtered.length}</Badge>
              </div>
              <div className="hidden md:flex items-center gap-2">
                <Button variant={grid ? "default" : "outline"} onClick={() => setGrid(true)} className="rounded-2xl">Siatka</Button>
                <Button variant={!grid ? "default" : "outline"} onClick={() => setGrid(false)} className="rounded-2xl">Lista</Button>
              </div>
            </div>

            <div className={filtersClass}>
              <div className="md:col-span-3">
                <Input placeholder="Szukaj..." value={query} onChange={(e) => { setQuery(e.target.value); setPage(1); }} />
              </div>

              <select className="md:col-span-2 rounded-2xl border border-zinc-200 p-2.5 text-sm bg-white/70 focus-ring transition-shadow duration-300"
                value={city}
                onChange={(e) => { setCity(e.target.value); setPage(1); }}>
                <option value="">Lokalizacja</option>
                {cities.map((c) => (<option key={c} value={c}>{c}</option>))}
              </select>

              <select className="md:col-span-2 rounded-2xl border border-zinc-200 p-2.5 text-sm bg-white/70 focus-ring transition-shadow duration-300"
                value={type}
                onChange={(e) => { setType(e.target.value); setPage(1); }}>
                <option value="">Typ</option>
                {types.map((tp) => (<option key={tp} value={tp}>{tp}</option>))}
              </select>

              <select className="md:col-span-2 rounded-2xl border border-zinc-200 p-2.5 text-sm bg-white/70 focus-ring transition-shadow duration-300"
                value={rooms}
                onChange={(e) => { setRooms(Number(e.target.value)); setPage(1); }}>
                <option value={0}>Pokoje</option>
                {[1,2,3,4,5].map((r) => (<option key={r} value={r}>{r}+</option>))}
              </select>

              <select className="md:col-span-3 rounded-2xl border border-zinc-200 p-2.5 text-sm bg-white/70 focus-ring transition-shadow duration-300"
                value={sort}
                onChange={(e) => setSort(e.target.value)}>
                <option value="newest">Najnowsze</option>
                <option value="cheapest">Najtańsze</option>
                <option value="featured">Polecane</option>
              </select>

              <div className="md:col-span-6 px-2">
                <label className="text-xs text-zinc-500">Metraż: {area[0]}–{area[1]} m²</label>
                <Slider defaultValue={area} min={20} max={200} step={5} onValueChange={(v) => { setArea(v); setPage(1); }} />
              </div>

              <div className="md:col-span-6 px-2">
                <label className="text-xs text-zinc-500">Cena: {currency(price[0])} – {currency(price[1])}</label>
                <Slider defaultValue={price} min={200000} max={2000000} step={10000} onValueChange={(v) => { setPrice(v); setPage(1); }} />
              </div>

              <div className="md:col-span-12 flex justify-end">
                <Button variant="ghost" onClick={resetFilters} className="rounded-2xl">Wyczyść</Button>
              </div>
            </div>

            {loading && (
              <div className="mt-6 grid md:grid-cols-3 gap-4">
                {Array.from({ length: 6 }).map((_, i) => (
                  <div key={i} className="rounded-[1.6rem] border glass h-80 overflow-hidden">
                    <div className="h-56 skeleton" />
                    <div className="p-5 space-y-3">
                      <div className="h-4 w-3/4 rounded bg-zinc-200/70" />
                      <div className="h-3 w-2/3 rounded bg-zinc-200/70" />
                      <div className="h-10 w-full rounded-2xl bg-zinc-200/70" />
                    </div>
                  </div>
                ))}
              </div>
            )}

            {!loading && error && (
              <div className="mt-6 p-4 rounded-2xl bg-red-50 text-red-700 text-center border border-red-200">
                {error}
              </div>
            )}

            {!loading && !error && (
              <div className="mt-6 grid gap-4 sm:grid-cols-2 md:grid-cols-3">
                {visible.map((item) => (
                  <div key={item.id} className="cursor-pointer" onClick={() => onSelect(item)}>
                    <OfferCard data={item} fav={favs.includes(item.id)} onFav={(e) => { e.stopPropagation(); toggleFav(item.id); }} />
                  </div>
                ))}
              </div>
            )}
          </div>
        </section>
      );
    }

    function OfferCard({ data, fav, onFav }) {
      const imgs = (Array.isArray(data.images) && data.images.length ? data.images : (data.image ? [data.image] : []));
      const cover = imgs[0] || "";
      const count = imgs.length;

      return (
        <div className="relative group">
          <Card className="overflow-hidden rounded-[1.6rem] border-zinc-200/70 glass shadow-[0_24px_80px_-55px_rgba(2,6,23,0.35)] transition-transform duration-300 group-hover:-translate-y-1">
            <div className="relative h-56">
              {cover ? (
                <img src={cover} alt={data.title} className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105" loading="lazy" />
              ) : (
                <div className="h-full w-full bg-zinc-200/60 flex items-center justify-center text-zinc-600">
                  Brak zdjęcia
                </div>
              )}
              <div className="absolute inset-0 bg-gradient-to-t from-black/35 via-black/0 to-black/0" />

              {count > 1 && (
                <div className="absolute bottom-3 right-3 px-2 py-1 rounded-xl bg-black/65 text-white text-xs backdrop-blur border border-white/10">
                  1/{count}
                </div>
              )}

              <button
                aria-label={fav ? "Usuń z ulubionych" : "Dodaj do ulubionych"}
                onClick={onFav}
                className={cn(
                  "absolute top-3 right-3 p-2 rounded-2xl transition-all border",
                  fav ? "bg-red-500 text-white border-red-500" : "bg-white/80 text-zinc-800 border-white/60 hover:bg-white"
                )}
              >
                <Icon name="Heart" className={cn("h-4 w-4", fav && "fill-current")} />
              </button>

              <Badge className="absolute left-3 top-3 bg-black/70 text-white backdrop-blur border-0">{data.type}</Badge>

              <div className="absolute bottom-3 left-3 right-3 text-white">
                <div className="text-sm opacity-95">{data.city} • {data.area} m² • {data.rooms} pokoje</div>
                <div className="text-xl font-semibold">{currency(data.price)}</div>
              </div>
            </div>

            <CardHeader className="pb-2">
              <CardTitle className="text-xl">{data.title}</CardTitle>
              <div className="flex items-center gap-2 text-zinc-500 text-sm">
                <Icon name="MapPin" /> {data.city}
              </div>
            </CardHeader>

            <CardContent className="flex items-center justify-between gap-3">
              <div className="text-sm text-zinc-500">
                {data.floor != null && String(data.floor).trim() !== ""
                  ? <>Piętro: <span className="font-semibold text-zinc-700">{data.floor}</span></>
                  : "Sprawdź szczegóły"}
              </div>
              <Button variant="default" className="rounded-2xl shrink-0">Szczegóły</Button>
            </CardContent>
          </Card>
        </div>
      );
    }

    function OfferDetailsModal({ offer, onClose }) {
      const images = useMemo(() => {
        const arr = Array.isArray(offer.images) ? offer.images.filter(Boolean) : [];
        if (arr.length) return arr;
        if (offer.image) return [offer.image];
        return [];
      }, [offer]);

      const total = images.length;
      const [idx, setIdx] = useState(0);

      const goNext = () => setIdx((i) => (total ? (i + 1) % total : 0));
      const goPrev = () => setIdx((i) => (total ? (i - 1 + total) % total : 0));

      const startX = useRef(null);

      useEffect(() => {
        const onKey = (e) => {
          if (e.key === "ArrowRight") goNext();
          if (e.key === "ArrowLeft") goPrev();
          if (e.key === "Escape") onClose();
        };
        window.addEventListener("keydown", onKey);
        document.body.style.overflow = 'hidden';
        return () => { window.removeEventListener("keydown", onKey); document.body.style.overflow = 'unset'; };
      }, [total, onClose]);

      useEffect(() => { setIdx(0); }, [offer?.id]);

      const Field = ({ label, value }) => (
        <div className="rounded-2xl border bg-zinc-50 p-3">
          <div className="text-xs text-zinc-500">{label}</div>
          <div className="mt-1 font-semibold text-zinc-800 break-words">{value}</div>
        </div>
      );

      const mainImg = total ? images[idx] : "";

      return (
        <div className="fixed inset-0 z-[100] bg-black/55 backdrop-blur-sm animate-fade-up" onClick={onClose} role="dialog" aria-modal="true">
          <div onClick={(e) => e.stopPropagation()} className="relative w-full h-full overflow-hidden flex flex-col md:flex-row">
            <button
              aria-label="Zamknij"
              onClick={onClose}
              className="absolute top-4 right-4 z-20 p-2 rounded-2xl bg-white/90 text-zinc-800 hover:bg-white transition-colors shadow focus-ring"
            >
              <Icon name="X" className="h-6 w-6" />
            </button>

            <div
              className="w-full md:w-1/2 h-[45vh] md:h-full relative select-none bg-black"
              onTouchStart={(e) => { startX.current = e.touches?.[0]?.clientX ?? null; }}
              onTouchEnd={(e) => {
                const endX = e.changedTouches?.[0]?.clientX ?? null;
                if (startX.current == null || endX == null) return;
                const dx = endX - startX.current;
                if (Math.abs(dx) < 40) return;
                if (dx < 0) goNext();
                else goPrev();
              }}
            >
              {mainImg ? (
                <img src={mainImg} alt={offer.title} className="h-full w-full object-cover" />
              ) : (
                <div className="h-full w-full flex items-center justify-center text-white/80">Brak zdjęć</div>
              )}

              {total > 1 && (
                <>
                  <button aria-label="Poprzednie zdjęcie" onClick={goPrev}
                    className="absolute left-4 top-1/2 -translate-y-1/2 z-10 rounded-2xl bg-white/90 p-2 shadow hover:bg-white focus-ring">
                    <Icon name="ChevronLeft" className="h-6 w-6" />
                  </button>
                  <button aria-label="Następne zdjęcie" onClick={goNext}
                    className="absolute right-4 top-1/2 -translate-y-1/2 z-10 rounded-2xl bg-white/90 p-2 shadow hover:bg-white focus-ring">
                    <Icon name="ChevronRight" className="h-6 w-6" />
                  </button>

                  <div className="absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2">
                    {images.map((_, i) => (
                      <button key={i} aria-label={`Zdjęcie ${i + 1}`} onClick={() => setIdx(i)}
                        className={cn("h-2.5 w-2.5 rounded-full transition-all", i === idx ? "bg-white" : "bg-white/40 hover:bg-white/70")} />
                    ))}
                  </div>

                  <div className="absolute top-4 left-4 z-10 px-3 py-1 rounded-2xl bg-black/55 text-white text-sm border border-white/10 backdrop-blur">
                    {idx + 1}/{total}
                  </div>
                </>
              )}
            </div>

            <div className="w-full md:w-1/2 p-6 md:p-8 overflow-y-auto bg-white">
              <div className="flex items-center gap-2 flex-wrap">
                <Badge>{offer.type || "Brak informacji"}</Badge>
                {offer.featured ? <Badge variant="secondary">Polecane</Badge> : null}
              </div>

              <h2 className="text-2xl sm:text-3xl font-bold mt-2 break-words">{offer.title || "Brak tytułu"}</h2>
              <div className="flex items-center gap-2 text-zinc-500 mt-1">
                <Icon name="MapPin" /> {offer.city || "Brak informacji"}
              </div>

              <div className="text-3xl sm:text-4xl font-bold my-6 break-words">
                {Number.isFinite(Number(offer.price)) ? currency(Number(offer.price)) : "Brak informacji"}
              </div>

              <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 border-t pt-6">
                <Field label="Metraż" value={Number.isFinite(Number(offer.area)) ? `${offer.area} m²` : "Brak informacji"} />
                <Field label="Liczba pokoi" value={Number.isFinite(Number(offer.rooms)) ? String(offer.rooms) : "Brak informacji"} />
                <Field label="Piętro" value={safeFloor(offer.floor)} />
                <Field label="Czynsz" value={infoOr(offer.rent)} />
                <Field label="Rynek" value={infoOr(offer.market)} />
                <Field label="Stan wykończenia" value={infoOr(offer.finish)} />
                <Field label="Ogrzewanie" value={infoOr(offer.heating)} />
                <Field label="Forma własności" value={infoOr(offer.ownership)} />
              </div>

              <div className="mt-6 border-t pt-6">
                <div className="text-sm font-semibold text-zinc-600">Opis</div>
                <p className="mt-2 text-zinc-700 leading-relaxed whitespace-pre-line">
                  {offer.description ? offer.description : "Brak informacji"}
                </p>
              </div>
            </div>
          </div>
        </div>
      );
    }

    function Footer() {
      return (
        <footer className="py-10 border-t glass">
          <div className="mx-auto max-w-7xl px-4 flex flex-col items-center text-center gap-4 text-sm text-zinc-600">
            <div className="flex items-center gap-3">
              <img src="https://i.imgur.com/UwnwhuV.png" alt="Centrum nieruchomości Logo" className="h-10 w-10 drop-shadow-sm" />
              <div>
                <div className="font-semibold tracking-tight">© {new Date().getFullYear()} Centrum nieruchomości</div>
                <div className="text-xs text-zinc-600">Zacharska Klaudia</div>
              </div>
            </div>
          </div>
        </footer>
      );
    }

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
